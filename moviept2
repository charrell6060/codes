def display_menu():
    """Displays the menu choices."""
    print("\nMovie List Menu\n1. Display Movie List\n2. Add Movie\n3. Delete Movie\n4. Exit")

def load_movies(filename):
    """Opens the file and returns a list of movie titles."""
    try:
        with open(filename, "r") as file:
            return [line.strip() for line in file]
    except FileNotFoundError:
        print(f"Error: File '{filename}' not found.")
        return []

def display_movies(movie_list):
    """Displays the movie titles."""
    if movie_list:
        print("\nMovie List:")
        for i, movie in enumerate(movie_list, 1):
            print(f"{i}. {movie}")
    else:
        print("The movie list is empty.")

def add_movie(movie_list):
    """Adds a movie to the list."""
    title = input("\nEnter movie title (or 'cancel' to abort): ")
    if title.lower() == 'cancel':
        return
    if title and title not in movie_list:
        movie_list.append(title)
        print(f"Movie '{title}' added.")
    else:
        print("Invalid title or movie already in list.")

def delete_movie(movie_list):
    """Deletes a movie from the list."""
    display_movies(movie_list)
    try:
        choice = int(input("\nEnter the number of the movie to delete: ")) - 1
        if 0 <= choice < len(movie_list):
            deleted = movie_list.pop(choice)
            print(f"Movie '{deleted}' deleted.")
        else:
            print("Invalid choice.")
    except ValueError:
        print("Invalid input.")

def save_movies(movie_list, filename):
    """Saves the movie list to the file."""
    with open(filename, "w") as file:
        file.write("\n".join(movie_list))

def main():
    filename = "movies.txt"
    movie_list = load_movies(filename)

    while True:
        display_menu()
        choice = input("\nEnter your choice: ")

        if choice == "1":
            display_movies(movie_list)
        elif choice == "2":
            add_movie(movie_list)
            save_movies(movie_list, filename)
        elif choice == "3":
            delete_movie(movie_list)
            save_movies(movie_list, filename)
        elif choice == "4":
            print("Exiting program.")
            break
        else:
            print("Invalid choice.")

if __name__ == "__main__":
    main()
